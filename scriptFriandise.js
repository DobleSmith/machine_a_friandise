

  let allAccounts_g ;//= web3.eth.getAccounts().then(function(allAccounts){;
  let myContract;
  let nombreMachine=1;

  let adresseMachine1 = 0x2dD5A294d720465A6495f813D3893170d8c8425F;
  let adresseMachine2;

  /*let keyPrivate =  [
                    "0xe741ea4ddbdbdd8124a551a8e780b2c47e5aa538c69a470a638e6ab728b33a10",
                    "0x569a517ffec94460cfde0a5fc21af52cc0bf811f833080b32304b3a6d9d2c0c1",
                    "0xe0e2fbb98e90e876991300033292bb074ac0d5aa4e305c1235da6f39f969ee37"
                    ]; */

  let keyPrivate =  [
                    "0x82aed75e4831c5049451589ddfd8ed5553ede880e4892c338639eb3c867c3925",
                    "0xf06a826bd0fbde6bb2fffbe3cda8763f50104447dc090c63d281e9ecccc46009",
                    "0xe881a0d864fca131ffc1aa5df8d4d0d8d11b793a849d851b2f4ad8fa6997f56f"
                    ]; 


let adresse_Machine = [];
  /*Fonction qui affiche les données des comptes utilsiateurs d'une blockchain*/
  const initialisation = async() =>{

    let web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:7560'));

    let allAccounts = await web3.eth.getAccounts();

    let user = document.getElementById("utilisateur"); 
    user.innerHTML='';
    for(let i =1; i <= 5/*allAccounts.length*/; ++i){
      
      let nonceId = await web3.eth.getTransactionCount(allAccounts[i-1]);
      let balance = await web3.eth.getBalance(allAccounts[i-1]);
      let user = document.getElementById("utilisateur"); 

      user.innerHTML += "<td colspan=\"2\"><div class=\"adresse\" id=\"adresse_"+i+"\">Adr : "+allAccounts[i-1] + "</div><div class=\"nonce\" id=\"nonce_"+i+"\">Nonce :"+nonceId + "</div><div class=\"balance\" id=\"balance_"+i+"\">Eth :"+web3.utils.fromWei(balance, 'ether') + "</div><div class=\"panier\" id=\"panier_"+i+"\"></div></td>"; 
    }
  }

initialisation();


  /**
  *
  * CREATION MACHINE A FRIANDISE
  *
  */

  /*Fonction pour déployer et visualiser une machine à friandise*/
  const deploiementMachine = async() =>{
    deploiementContract();
    createHTMLMachineFriandise();
  }



 const deploiementContract  = async () => {
    let address = document.getElementById("adresse").value;
    //let nombreMaxFriandise = document.getElementById("nombreMaxFriandise").value;
    let web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:7560'));


    //const contratDeploie = new web3.eth.Contract(abi);

    let payload={
      data: bytecode,
      arguments: [6,3,1,5,2,3,10] // Paramètre constructeur 
    }

    let parameter={
      from: address, // Addresse ou adresse privée ?
      gas: web3.utils.toHex(2100000),
      //gasPrice: web3.utils.toHex(web3.utils.toWei('30', "gwei")),

    }

    let contratDeploie = new web3.eth.Contract(JSON.parse(abi),address);

    const t = contratDeploie.deploy(payload).send(parameter, (err, transactionHash) => {
    })
    .on('receipt', function(){
      alert("oui?");
    })

  }


  /*Fonction qui créer une machine a friandise en HTML */
  function createHTMLMachineFriandise(){
    let i=1; 
    if(document.getElementById('machine_friandise_1')){i=2;}
    document.getElementById("machine_"+i).innerHTML += "\"<div class=\"machine_friandise\" id=\"machine_friandise_"+i+"\"><table><thead><th colspan=\"3\">Machine à friandise N°"+i+"</th></thead><tbody><tr><td><p style=\"text-align: center;\">N° </p></td><td><p style=\"text-align: center;\">Friandises disponibles</p></td><td><p style=\"text-align: center;\">Prix en Ether </p></td><tr><td><p style=\"text-align: center;\">_1_</p></td><td id=\""+i+"friandise_1\"></td><td><p style=\"text-align: center;\"><button type=\"button\" onclick=\"removeProduct("+i+",1,1)\">1Eth</button></p></td></tr><tr><td><p style=\"text-align: center;\">_2_</p></td><td id=\""+i+"friandise_2\"></td><td><p style=\"text-align: center;\"><button type=\"button\" onclick=\"removeProduct("+i+",2,5)\">5Eth</button></p></td></tr><tr><td><p style=\"text-align: center;\">_3_</p></td><td id=\""+i+"friandise_3\"></td><td><p style=\"text-align: center;\"><button type=\"button\" onclick=\"removeProduct("+i+",3,2)\">2Eth</button></p></td></tr><tr><td><p style=\"text-align: center;\">_4_</p></td><td id=\""+i+"friandise_4\"></td><td><p style=\"text-align: center;\"><button type=\"button\" onclick=\"removeProduct("+i+",4,3)\">3Eth</button></p></td></tr><tr><td><p style=\"text-align: center;\" >_5_</p></td><td  id=\""+i+"friandise_5\"></td><td><p style=\"text-align: center;\"><button type=\"button\" onclick=\"removeProduct("+i+",5,1.5)\">1,5Eth</button></p></td></tr></tbody><tfoot><tr><th colspan=\"3\">___<button type=\"button\" onclick=\"rechargeMachineFriandise("+i+")\">Recharge machine "+i+" </button>///<button type=\"button\" onclick=\"remplir("+i+")\">Remplir la machine "+i+" </button><br>|_____|_____|<input type=\"adresseMachine_"+i+"\" id=\"adresseMachine_"+i+"\" name=\"adresseMachine_"+i+"\" ><button type=\"button\" onclick=\"adresseMachine("+i+")\">Adresse machine </button>|_____|_____|</th></tr></tfoot></table></div>";
  }

  /*Fonction qui stocke les adresse de déploiement des machines */
  function adresseMachine(i){
    adresse_Machine.push(document.getElementById("adresseMachine_"+i).value);
    //console.log(adresse_Machine);
  }
  

  /**
  *
  * RECHARGE MACHINE A FRIANDISE 
  *
  */


/*Envoie d'une transaction pour remplir la machine */
const rechargeMachineFriandise = async(idMachine) => {
  
  let web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:7560'));

  let adresseConctratBlockchain = document.getElementById("adresseMachine_"+idMachine).value;
  let contrat = new web3.eth.Contract(JSON.parse(abi), adresseConctratBlockchain); 

  let address = document.getElementById("adresse").value;
  let parameter={
    from: address,// Addresse ou adresse privée ?
    gas: web3.utils.toHex(2100000),
    //gasPrice: web3.utils.toHex(web3.utils.toWei('30', "gwei")),
  }


  await contrat.methods.refillAll().send(parameter , function (err, res) {
     if (err) {
       console.log("Une erreur s'est produite", err)
       return
     }
     console.log("Hash de la transaction : " + res)
     }).catch(
      (err) => {
        console.log(err);
      }
    )
}

/*Fonction qui met a jour le nombre de friandise dans la machine en HTML */
const remplir = async(idMachine) => {

  let web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:7560'));
  let adresseConctratBlockchain = document.getElementById("adresseMachine_"+idMachine).value;
  let contrat = new web3.eth.Contract(JSON.parse(abi), adresseConctratBlockchain); 

 
  await contrat.methods.getAllpJaune().call().then(
    receipt => {
      console.log(receipt);
      for(let i = 0; i < receipt.length; ++i){
      if(!document.getElementById(idMachine+"_"+receipt[i])){
          document.getElementById(idMachine + "friandise_1").innerHTML +="<div class=\"f_1\" id=\""+idMachine+"_"+receipt[i]+"\">"+idMachine+"_"+receipt[i]+"</div>";
        }
      }
    }); 

  await contrat.methods.getAllpVert().call().then(
    receipt => {
    for(let i = 0; i < receipt.length; ++i){
      if(!document.getElementById(idMachine+"_"+receipt[i])){
        document.getElementById(idMachine + "friandise_2").innerHTML +="<div class=\"f_2\" id=\""+idMachine+"_"+receipt[i]+"\">"+idMachine+"_"+receipt[i]+"</div>";
      }
    }
  });

  await contrat.methods.getAllpRouge().call().then(
  receipt => {
    for(let i = 0; i < receipt.length; ++i){
      if(!document.getElementById(idMachine+"_"+receipt[i])){
        document.getElementById(idMachine + "friandise_3").innerHTML +="<div class=\"f_3\" id=\""+idMachine+"_"+receipt[i]+"\">"+idMachine+"_"+receipt[i]+"</div>";
      }
    }
  });

  await contrat.methods.getAllpOrange().call().then(
  receipt => {
    for(let i = 0; i < receipt.length; ++i){
      if(!document.getElementById(idMachine+"_"+receipt[i])){
        document.getElementById(idMachine + "friandise_4").innerHTML +="<div class=\"f_4\" id=\""+idMachine+"_"+receipt[i]+"\">"+idMachine+"_"+receipt[i]+"</div>";
      }
    }
  });

  await contrat.methods.getAllpBleu().call().then(
  receipt => {
    for(let i = 0; i < receipt.length; ++i){
      if(!document.getElementById(idMachine+"_"+receipt[i])){
        document.getElementById(idMachine + "friandise_5").innerHTML +="<div class=\"f_5\" id=\""+idMachine+"_"+receipt[i]+"\">"+idMachine+"_"+receipt[i]+"</div>";
      }
    }
  });
}





  const modifValeurSC  = async (idMachine,position) => {

    let web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:7560'));
    let adr = document.getElementById("adresse").value;

    let adresseMachine = document.getElementById("adresseMachine_"+idMachine).value;
    let contrat = new web3.eth.Contract(JSON.parse(abi), adresseMachine); 

    switch(position){
      case 1 :
        sendTransaction(contrat,adr,"1");
     break;
      case 2 :
        sendTransaction(contrat,adr,"5");
     break;
      case 3 :
        sendTransaction(contrat,adr,"2");
     break;
      case 4 :
        sendTransaction(contrat,adr,"3");
      break;
      case 5 :
        sendTransaction(contrat,adr,"10");
     break;
    }


  }

  const sendTransaction = async(contrat,_from,_argent)=>{
    let web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:7560'));
    
    let parameter={
      from:  _from,// Addresse ou adresse privée ?
      gas: web3.utils.toHex(2100000),
      value: web3.utils.toWei(_argent),
    }
    contrat.methods.buyOrange().send(parameter,()=>{
      console.log(parameter);
    });


}




/*Supprime  un produit de la machine et l'ajoute à une personne */
//function removeProduct(numMachine,position,argent){
const removeProduct = async (numMachine,position,argent) => {


  let web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:7560'));
  let allAccounts = await web3.eth.getAccounts()

  let adr = document.getElementById("adresse").value;
  idPersonne = allAccounts.indexOf(adr)+1;

  let select = document.getElementById(numMachine+"friandise_"+position);
  
  let id_produit = select.lastElementChild.getAttribute('id');// alert(numMachine+"friandise_"+position);

  select.removeChild(select.lastElementChild);

  let ajout = document.getElementById("panier_"+idPersonne);
  ajout.innerHTML += "<div class=\"f_"+position+"\" id=\""+id_produit+"\">"+id_produit+"</div>";



  modifValeurSC(numMachine,position)


    for(let id_Personne =1; id_Personne <= allAccounts.length; ++id_Personne){
      let nonce = document.getElementById("nonce_"+id_Personne); 
      let compte = document.getElementById("balance_"+id_Personne); 

      let nonceId = await web3.eth.getTransactionCount(allAccounts[id_Personne-1]).then(nonceId => {nonce.innerHTML = "Nonce :" + nonceId})
      let balance = await web3.eth.getBalance(allAccounts[id_Personne-1]).then(balance => {compte.innerHTML = "Eth :" + web3.utils.fromWei(balance, 'ether')})
    }

    
    //compte.innerHTML = web3.utils.fromWei(balance, 'ether')//"<div class=\"nonce\" id=\"nonce_"+i+"\">Nonce :"+nonceId + "</div><div class=\"balance\" id=\"balance_"+i+"\">Eth :"+web3.utils.fromWei(balance, 'ether') + "</div>"



}



function misAJourBlockchain(){
  blockchain();
}

const blockchain = async() =>  {
  let web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:7560'));

  //const rep = await web3.eth.getBlockNumber();
  let tep = await web3.eth.getBlockNumber();//.then(console.log);
  console.log(tep);
  let blockchain = document.getElementById("blockchain");
  blockchain.innerHTML=''
  for (var i=0; i < tep; i++) {

      web3.eth.getTransactionFromBlock(i+1, 0).then(
        receipt => {
          //console.log(receipt);
          blockchain.innerHTML +="<td>";
          blockchain.innerHTML += "<b>blockNumber : </b>" + receipt.blockNumber +"<br>";
          blockchain.innerHTML += "<b>blockHash : </b>" + receipt.blockHash +"<br>";
          blockchain.innerHTML += "<b>from : </b>" + receipt.from +"<br>";
          let res = receipt.input; 
          if(res.length > 80){res = res.substring(0,25)+'[...]'+res.substring(res.length-25)}
          blockchain.innerHTML += "<b>input : </b>" + res+"<br>";
          blockchain.innerHTML += "<b>to :  </b>" + receipt.to +"<br>";
          blockchain.innerHTML += "<b>hash : </b>" + receipt.hash +"<br>";
          blockchain.innerHTML +="</td>";
          //blockchain.innerHTML +=  "<td>---</td>";
      });



  }
}


































//Param limite achat 
let bytecode = '6080604052600060055560006008556000600b556000600e5560006011553480156200002a57600080fd5b506040516200238338038062002383833981810160405281019062000050919062000116565b60008081905550856003819055508660028190555033600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550846006819055508360098190555082600c8190555081600f819055508060128190555050505050505050620001c9565b600080fd5b6000819050919050565b620000f081620000db565b8114620000fc57600080fd5b50565b6000815190506200011081620000e5565b92915050565b600080600080600080600060e0888a031215620001385762000137620000d6565b5b6000620001488a828b01620000ff565b97505060206200015b8a828b01620000ff565b96505060406200016e8a828b01620000ff565b9550506060620001818a828b01620000ff565b9450506080620001948a828b01620000ff565b93505060a0620001a78a828b01620000ff565b92505060c0620001ba8a828b01620000ff565b91505092959891949750929550565b6121aa80620001d96000396000f3fe6080604052600436106101405760003560e01c80636c7ba1af116100b6578063c97348351161006f578063c973483514610394578063d290b6a8146103bf578063dae251c7146103fc578063ddf283e214610413578063ed683a211461041d578063fd5054261461045a57610140565b80636c7ba1af1461030b57806397922c8814610315578063a1bfa8b11461031f578063b26c15fe14610329578063c1ee005414610340578063c91fd5eb1461035757610140565b8063348d51df11610108578063348d51df1461022c57806334c58cfb146102435780633d9a57b014610280578063467f5777146102ab5780634966f012146102d6578063639afa501461030157610140565b806302ca394f146101455780630b7d2bff146101705780630dfd0cb0146101ad5780631416a758146101c45780631911161e14610201575b600080fd5b34801561015157600080fd5b5061015a610471565b6040516101679190611b64565b60405180910390f35b34801561017c57600080fd5b5061019760048036038101906101929190611bb7565b61053b565b6040516101a49190611bf3565b60405180910390f35b3480156101b957600080fd5b506101c2610559565b005b3480156101d057600080fd5b506101eb60048036038101906101e69190611bb7565b61066d565b6040516101f89190611bf3565b60405180910390f35b34801561020d57600080fd5b5061021661068b565b6040516102239190611b64565b60405180910390f35b34801561023857600080fd5b50610241610755565b005b34801561024f57600080fd5b5061026a60048036038101906102659190611bb7565b610869565b6040516102779190611bf3565b60405180910390f35b34801561028c57600080fd5b50610295610887565b6040516102a29190611b64565b60405180910390f35b3480156102b757600080fd5b506102c0610951565b6040516102cd9190611b64565b60405180910390f35b3480156102e257600080fd5b506102eb610a1b565b6040516102f89190611b64565b60405180910390f35b610309610ae5565b005b610313610d04565b005b61031d610f1e565b005b610327611138565b005b34801561033557600080fd5b5061033e611352565b005b34801561034c57600080fd5b50610355611466565b005b34801561036357600080fd5b5061037e60048036038101906103799190611bb7565b61157a565b60405161038b9190611bf3565b60405180910390f35b3480156103a057600080fd5b506103a9611598565b6040516103b69190611bf3565b60405180910390f35b3480156103cb57600080fd5b506103e660048036038101906103e19190611c6c565b6115a2565b6040516103f39190611b64565b60405180910390f35b34801561040857600080fd5b50610411611646565b005b61041b61175a565b005b34801561042957600080fd5b50610444600480360381019061043f9190611bb7565b611974565b6040516104519190611bf3565b60405180910390f35b34801561046657600080fd5b5061046f611992565b005b6060600060085467ffffffffffffffff81111561049157610490611c99565b5b6040519080825280602002602001820160405280156104ca57816020015b6104b7611a6d565b8152602001906001900390816104af5790505b50905060005b600854811015610533576007600082815260200190815260200160002060405180602001604052908160008201548152505082828151811061051557610514611cc8565b5b6020026020010181905250808061052b90611d26565b9150506104d0565b508091505090565b60046020528060005260406000206000915090508060000154905081565b3373ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146105e9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105e090611dcb565b60405180910390fd5b6000600e5490505b60025481101561066a576000610605611a4c565b90506000604051806020016040528083815250905080600d6000600e54815260200190815260200160002060008201518160000155905050600e600081548092919061065090611d26565b91905055505050808061066290611d26565b9150506105f1565b50565b600a6020528060005260406000206000915090508060000154905081565b60606000600b5467ffffffffffffffff8111156106ab576106aa611c99565b5b6040519080825280602002602001820160405280156106e457816020015b6106d1611a6d565b8152602001906001900390816106c95790505b50905060005b600b5481101561074d57600a600082815260200190815260200160002060405180602001604052908160008201548152505082828151811061072f5761072e611cc8565b5b6020026020010181905250808061074590611d26565b9150506106ea565b508091505090565b3373ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146107e5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107dc90611dcb565b60405180910390fd5b600060085490505b600254811015610866576000610801611a4c565b90506000604051806020016040528083815250905080600760006008548152602001908152602001600020600082015181600001559050506008600081548092919061084c90611d26565b91905055505050808061085e90611d26565b9150506107ed565b50565b60076020528060005260406000206000915090508060000154905081565b60606000600e5467ffffffffffffffff8111156108a7576108a6611c99565b5b6040519080825280602002602001820160405280156108e057816020015b6108cd611a6d565b8152602001906001900390816108c55790505b50905060005b600e5481101561094957600d600082815260200190815260200160002060405180602001604052908160008201548152505082828151811061092b5761092a611cc8565b5b6020026020010181905250808061094190611d26565b9150506108e6565b508091505090565b6060600060115467ffffffffffffffff81111561097157610970611c99565b5b6040519080825280602002602001820160405280156109aa57816020015b610997611a6d565b81526020019060019003908161098f5790505b50905060005b601154811015610a1357601060008281526020019081526020016000206040518060200160405290816000820154815250508282815181106109f5576109f4611cc8565b5b60200260200101819052508080610a0b90611d26565b9150506109b0565b508091505090565b6060600060055467ffffffffffffffff811115610a3b57610a3a611c99565b5b604051908082528060200260200182016040528015610a7457816020015b610a61611a6d565b815260200190600190039081610a595790505b50905060005b600554811015610add5760046000828152602001908152602001600020604051806020016040529081600082015481525050828281518110610abf57610abe611cc8565b5b60200260200101819052508080610ad590611d26565b915050610a7a565b508091505090565b600060115411610b2a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b2190611e37565b60405180910390fd5b601254341015610b6f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b6690611ea3565b60405180910390fd5b6000610b7a336115a2565b51905060058110610bc0576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610bb790611f0f565b60405180910390fd5b60116000815480929190610bd390611f2f565b9190505550600060106000601154815260200190815260200160002060405180602001604052908160008201548152505090506010600060115481526020019081526020016000206000808201600090555050601360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190806001815401808255809150506001900390600052602060002001600090919091909150600082015181600001555050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc349081150290604051600060405180830381858888f19350505050158015610cff573d6000803e3d6000fd5b505050565b6000600b5411610d49576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d4090611fa4565b60405180910390fd5b600c54341015610d8e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d8590611ea3565b60405180910390fd5b600354610d9a336115a2565b5110610ddb576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610dd290611f0f565b60405180910390fd5b600b6000815480929190610dee90611f2f565b91905055506000600a6000600b5481526020019081526020016000206040518060200160405290816000820154815250509050600a6000600b5481526020019081526020016000206000808201600090555050601360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190806001815401808255809150506001900390600052602060002001600090919091909150600082015181600001555050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc349081150290604051600060405180830381858888f19350505050158015610f1a573d6000803e3d6000fd5b5050565b6000600e5411610f63576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f5a90612010565b60405180910390fd5b600f54341015610fa8576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f9f90611ea3565b60405180910390fd5b600354610fb4336115a2565b5110610ff5576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610fec90611f0f565b60405180910390fd5b600e600081548092919061100890611f2f565b91905055506000600d6000600e5481526020019081526020016000206040518060200160405290816000820154815250509050600d6000600e5481526020019081526020016000206000808201600090555050601360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190806001815401808255809150506001900390600052602060002001600090919091909150600082015181600001555050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc349081150290604051600060405180830381858888f19350505050158015611134573d6000803e3d6000fd5b5050565b60006008541161117d576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111749061207c565b60405180910390fd5b6009543410156111c2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111b990611ea3565b60405180910390fd5b6003546111ce336115a2565b511061120f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161120690611f0f565b60405180910390fd5b6008600081548092919061122290611f2f565b9190505550600060076000600854815260200190815260200160002060405180602001604052908160008201548152505090506007600060085481526020019081526020016000206000808201600090555050601360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190806001815401808255809150506001900390600052602060002001600090919091909150600082015181600001555050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc349081150290604051600060405180830381858888f1935050505015801561134e573d6000803e3d6000fd5b5050565b3373ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146113e2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016113d990611dcb565b60405180910390fd5b600060115490505b6002548110156114635760006113fe611a4c565b90506000604051806020016040528083815250905080601060006011548152602001908152602001600020600082015181600001559050506011600081548092919061144990611d26565b91905055505050808061145b90611d26565b9150506113ea565b50565b3373ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146114f6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114ed90611dcb565b60405180910390fd5b600060055490505b600254811015611577576000611512611a4c565b90506000604051806020016040528083815250905080600460006005548152602001908152602001600020600082015181600001559050506005600081548092919061155d90611d26565b91905055505050808061156f90611d26565b9150506114fe565b50565b600d6020528060005260406000206000915090508060000154905081565b6000600254905090565b6060601360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b8282101561163b5783829060005260206000200160405180602001604052908160008201548152505081526020019060010190611603565b505050509050919050565b3373ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146116d6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016116cd90611dcb565b60405180910390fd5b6000600b5490505b6002548110156117575760006116f2611a4c565b90506000604051806020016040528083815250905080600a6000600b54815260200190815260200160002060008201518160000155905050600b600081548092919061173d90611d26565b91905055505050808061174f90611d26565b9150506116de565b50565b60006005541161179f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611796906120e8565b60405180910390fd5b6006543410156117e4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117db90612154565b60405180910390fd5b6003546117f0336115a2565b5110611831576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161182890611f0f565b60405180910390fd5b6005600081548092919061184490611f2f565b9190505550600060046000600554815260200190815260200160002060405180602001604052908160008201548152505090506004600060055481526020019081526020016000206000808201600090555050601360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190806001815401808255809150506001900390600052602060002001600090919091909150600082015181600001555050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc349081150290604051600060405180830381858888f19350505050158015611970573d6000803e3d6000fd5b5050565b60106020528060005260406000206000915090508060000154905081565b3373ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611a22576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611a1990611dcb565b60405180910390fd5b611a2a611466565b611a32610755565b611a3a611646565b611a42610559565b611a4a611352565b565b6000806000815480929190611a6090611d26565b9190505550600054905090565b6040518060200160405280600081525090565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000819050919050565b611abf81611aac565b82525050565b602082016000820151611adb6000850182611ab6565b50505050565b6000611aed8383611ac5565b60208301905092915050565b6000602082019050919050565b6000611b1182611a80565b611b1b8185611a8b565b9350611b2683611a9c565b8060005b83811015611b57578151611b3e8882611ae1565b9750611b4983611af9565b925050600181019050611b2a565b5085935050505092915050565b60006020820190508181036000830152611b7e8184611b06565b905092915050565b600080fd5b611b9481611aac565b8114611b9f57600080fd5b50565b600081359050611bb181611b8b565b92915050565b600060208284031215611bcd57611bcc611b86565b5b6000611bdb84828501611ba2565b91505092915050565b611bed81611aac565b82525050565b6000602082019050611c086000830184611be4565b92915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611c3982611c0e565b9050919050565b611c4981611c2e565b8114611c5457600080fd5b50565b600081359050611c6681611c40565b92915050565b600060208284031215611c8257611c81611b86565b5b6000611c9084828501611c57565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000611d3182611aac565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203611d6357611d62611cf7565b5b600182019050919050565b600082825260208201905092915050565b7f566f7573206e276574657320706173206c652070726f7072696f000000000000600082015250565b6000611db5601a83611d6e565b9150611dc082611d7f565b602082019050919050565b60006020820190508181036000830152611de481611da8565b9050919050565b7f50726f6475697420626c65752065737420766964650000000000000000000000600082015250565b6000611e21601583611d6e565b9150611e2c82611deb565b602082019050919050565b60006020820190508181036000830152611e5081611e14565b9050919050565b7f657870656e736976652021000000000000000000000000000000000000000000600082015250565b6000611e8d600b83611d6e565b9150611e9882611e57565b602082019050919050565b60006020820190508181036000830152611ebc81611e80565b9050919050565b7f4c696d6974652064276163686174202100000000000000000000000000000000600082015250565b6000611ef9601083611d6e565b9150611f0482611ec3565b602082019050919050565b60006020820190508181036000830152611f2881611eec565b9050919050565b6000611f3a82611aac565b915060008203611f4d57611f4c611cf7565b5b600182039050919050565b7f50726f6475697420726f75676520657374207669646500000000000000000000600082015250565b6000611f8e601683611d6e565b9150611f9982611f58565b602082019050919050565b60006020820190508181036000830152611fbd81611f81565b9050919050565b7f50726f64756974206f72616e6765206573742076696465000000000000000000600082015250565b6000611ffa601783611d6e565b915061200582611fc4565b602082019050919050565b6000602082019050818103600083015261202981611fed565b9050919050565b7f50726f6475697420766572742065737420766964650000000000000000000000600082015250565b6000612066601583611d6e565b915061207182612030565b602082019050919050565b6000602082019050818103600083015261209581612059565b9050919050565b7f50726f64756974206a61756e6520657374207669646500000000000000000000600082015250565b60006120d2601683611d6e565b91506120dd8261209c565b602082019050919050565b60006020820190508181036000830152612101816120c5565b9050919050565b7f496c206d616e717565206465206c27617267656e740000000000000000000000600082015250565b600061213e601583611d6e565b915061214982612108565b602082019050919050565b6000602082019050818103600083015261216d81612131565b905091905056fea26469706673582212209e67709b524e6a701f24dd2713b837358b832873f70968315331d23e48202dbc64736f6c63430008120033'
let abi = '[{"inputs": [{"internalType": "uint256","name": "_max_item","type": "uint256"},{"internalType": "uint256","name": "_limitAll","type": "uint256"},{"internalType": "uint256","name": "_priceJ","type": "uint256"},{"internalType": "uint256","name": "_priceV","type": "uint256"},{"internalType": "uint256","name": "_priceR","type": "uint256"},{"internalType": "uint256","name": "_priceO","type": "uint256"},{"internalType": "uint256","name": "_priceB","type": "uint256"}],"stateMutability": "nonpayable","type": "constructor"},{"inputs": [],"name": "buyBleu","outputs": [],"stateMutability": "payable","type": "function"},{"inputs": [],"name": "buyJaune","outputs": [],"stateMutability": "payable","type": "function"},{"inputs": [],"name": "buyOrange","outputs": [],"stateMutability": "payable","type": "function"},{"inputs": [],"name": "buyRouge","outputs": [],"stateMutability": "payable","type": "function"},{"inputs": [],"name": "buyVert","outputs": [],"stateMutability": "payable","type": "function"},{"inputs": [],"name": "getAllpBleu","outputs": [{"components": [{    "internalType": "uint256",    "name": "productToken",    "type": "uint256"}],"internalType": "struct friandise.Product[]","name": "","type": "tuple[]"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getAllpJaune","outputs": [{"components": [{    "internalType": "uint256",    "name": "productToken",    "type": "uint256"}],"internalType": "struct friandise.Product[]","name": "","type": "tuple[]"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getAllpOrange","outputs": [{"components": [{    "internalType": "uint256",    "name": "productToken",    "type": "uint256"}],"internalType": "struct friandise.Product[]","name": "","type": "tuple[]"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getAllpRouge","outputs": [{"components": [{    "internalType": "uint256",    "name": "productToken",    "type": "uint256"}],"internalType": "struct friandise.Product[]","name": "","type": "tuple[]"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getAllpVert","outputs": [{"components": [{    "internalType": "uint256",    "name": "productToken",    "type": "uint256"}],"internalType": "struct friandise.Product[]","name": "","type": "tuple[]"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getMaxItems","outputs": [{"internalType": "uint256","name": "","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [{"internalType": "address","name": "user","type": "address"}],"name": "getProductByUser","outputs": [{"components": [{    "internalType": "uint256",    "name": "productToken",    "type": "uint256"}],"internalType": "struct friandise.Product[]","name": "","type": "tuple[]"}],"stateMutability": "view","type": "function"},{"inputs": [{"internalType": "uint256","name": "","type": "uint256"}],"name": "pBleu","outputs": [{"internalType": "uint256","name": "productToken","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [{"internalType": "uint256","name": "","type": "uint256"}],"name": "pJaune","outputs": [{"internalType": "uint256","name": "productToken","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [{"internalType": "uint256","name": "","type": "uint256"}],"name": "pOrange","outputs": [{"internalType": "uint256","name": "productToken","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [{"internalType": "uint256","name": "","type": "uint256"}],"name": "pRouge","outputs": [{"internalType": "uint256","name": "productToken","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [{"internalType": "uint256","name": "","type": "uint256"}],"name": "pVert","outputs": [{"internalType": "uint256","name": "productToken","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "refillAll","outputs": [],"stateMutability": "nonpayable","type": "function"},{"inputs": [],"name": "refullProduitBleu","outputs": [],"stateMutability": "nonpayable","type": "function"},{"inputs": [],"name": "refullProduitJaune","outputs": [],"stateMutability": "nonpayable","type": "function"},{"inputs": [],"name": "refullProduitOrange","outputs": [],"stateMutability": "nonpayable","type": "function"},{"inputs": [],"name": "refullProduitRouge","outputs": [],"stateMutability": "nonpayable","type": "function"},{"inputs": [],"name": "refullProduitVert","outputs": [],"stateMutability": "nonpayable","type": "function"}]'

/*Param unique 
let bytecode = '6080604052600060045560006007556000600a556000600d5560006010553480156200002a57600080fd5b50604051620021723803806200217283398181016040528101906200005091906200010e565b600080819055508560028190555033600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550846005819055508360088190555082600b8190555081600e8190555080601181905550505050505050620001aa565b600080fd5b6000819050919050565b620000e881620000d3565b8114620000f457600080fd5b50565b6000815190506200010881620000dd565b92915050565b60008060008060008060c087890312156200012e576200012d620000ce565b5b60006200013e89828a01620000f7565b96505060206200015189828a01620000f7565b95505060406200016489828a01620000f7565b94505060606200017789828a01620000f7565b93505060806200018a89828a01620000f7565b92505060a06200019d89828a01620000f7565b9150509295509295509295565b611fb880620001ba6000396000f3fe6080604052600436106101405760003560e01c80636c7ba1af116100b6578063c97348351161006f578063c973483514610394578063d290b6a8146103bf578063dae251c7146103fc578063ddf283e214610413578063ed683a211461041d578063fd5054261461045a57610140565b80636c7ba1af1461030b57806397922c8814610315578063a1bfa8b11461031f578063b26c15fe14610329578063c1ee005414610340578063c91fd5eb1461035757610140565b8063348d51df11610108578063348d51df1461022c57806334c58cfb146102435780633d9a57b014610280578063467f5777146102ab5780634966f012146102d6578063639afa501461030157610140565b806302ca394f146101455780630b7d2bff146101705780630dfd0cb0146101ad5780631416a758146101c45780631911161e14610201575b600080fd5b34801561015157600080fd5b5061015a610471565b60405161016791906119de565b60405180910390f35b34801561017c57600080fd5b5061019760048036038101906101929190611a31565b61053b565b6040516101a49190611a6d565b60405180910390f35b3480156101b957600080fd5b506101c2610559565b005b3480156101d057600080fd5b506101eb60048036038101906101e69190611a31565b61066d565b6040516101f89190611a6d565b60405180910390f35b34801561020d57600080fd5b5061021661068b565b60405161022391906119de565b60405180910390f35b34801561023857600080fd5b50610241610755565b005b34801561024f57600080fd5b5061026a60048036038101906102659190611a31565b610869565b6040516102779190611a6d565b60405180910390f35b34801561028c57600080fd5b50610295610887565b6040516102a291906119de565b60405180910390f35b3480156102b757600080fd5b506102c0610951565b6040516102cd91906119de565b60405180910390f35b3480156102e257600080fd5b506102eb610a1b565b6040516102f891906119de565b60405180910390f35b610309610ae5565b005b610313610cb2565b005b61031d610e7f565b005b61032761104c565b005b34801561033557600080fd5b5061033e611219565b005b34801561034c57600080fd5b5061035561132d565b005b34801561036357600080fd5b5061037e60048036038101906103799190611a31565b611441565b60405161038b9190611a6d565b60405180910390f35b3480156103a057600080fd5b506103a961145f565b6040516103b69190611a6d565b60405180910390f35b3480156103cb57600080fd5b506103e660048036038101906103e19190611ae6565b611469565b6040516103f391906119de565b60405180910390f35b34801561040857600080fd5b5061041161150d565b005b61041b611621565b005b34801561042957600080fd5b50610444600480360381019061043f9190611a31565b6117ee565b6040516104519190611a6d565b60405180910390f35b34801561046657600080fd5b5061046f61180c565b005b6060600060075467ffffffffffffffff81111561049157610490611b13565b5b6040519080825280602002602001820160405280156104ca57816020015b6104b76118e7565b8152602001906001900390816104af5790505b50905060005b600754811015610533576006600082815260200190815260200160002060405180602001604052908160008201548152505082828151811061051557610514611b42565b5b6020026020010181905250808061052b90611ba0565b9150506104d0565b508091505090565b60036020528060005260406000206000915090508060000154905081565b3373ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146105e9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105e090611c45565b60405180910390fd5b6000600d5490505b60025481101561066a5760006106056118c6565b90506000604051806020016040528083815250905080600c6000600d54815260200190815260200160002060008201518160000155905050600d600081548092919061065090611ba0565b91905055505050808061066290611ba0565b9150506105f1565b50565b60096020528060005260406000206000915090508060000154905081565b60606000600a5467ffffffffffffffff8111156106ab576106aa611b13565b5b6040519080825280602002602001820160405280156106e457816020015b6106d16118e7565b8152602001906001900390816106c95790505b50905060005b600a5481101561074d576009600082815260200190815260200160002060405180602001604052908160008201548152505082828151811061072f5761072e611b42565b5b6020026020010181905250808061074590611ba0565b9150506106ea565b508091505090565b3373ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146107e5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107dc90611c45565b60405180910390fd5b600060075490505b6002548110156108665760006108016118c6565b90506000604051806020016040528083815250905080600660006007548152602001908152602001600020600082015181600001559050506007600081548092919061084c90611ba0565b91905055505050808061085e90611ba0565b9150506107ed565b50565b60066020528060005260406000206000915090508060000154905081565b60606000600d5467ffffffffffffffff8111156108a7576108a6611b13565b5b6040519080825280602002602001820160405280156108e057816020015b6108cd6118e7565b8152602001906001900390816108c55790505b50905060005b600d5481101561094957600c600082815260200190815260200160002060405180602001604052908160008201548152505082828151811061092b5761092a611b42565b5b6020026020010181905250808061094190611ba0565b9150506108e6565b508091505090565b6060600060105467ffffffffffffffff81111561097157610970611b13565b5b6040519080825280602002602001820160405280156109aa57816020015b6109976118e7565b81526020019060019003908161098f5790505b50905060005b601054811015610a1357600f60008281526020019081526020016000206040518060200160405290816000820154815250508282815181106109f5576109f4611b42565b5b60200260200101819052508080610a0b90611ba0565b9150506109b0565b508091505090565b6060600060045467ffffffffffffffff811115610a3b57610a3a611b13565b5b604051908082528060200260200182016040528015610a7457816020015b610a616118e7565b815260200190600190039081610a595790505b50905060005b600454811015610add5760036000828152602001908152602001600020604051806020016040529081600082015481525050828281518110610abf57610abe611b42565b5b60200260200101819052508080610ad590611ba0565b915050610a7a565b508091505090565b600060105411610b2a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b2190611cb1565b60405180910390fd5b601154341015610b6f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b6690611d1d565b60405180910390fd5b60106000815480929190610b8290611d3d565b91905055506000600f600060105481526020019081526020016000206040518060200160405290816000820154815250509050600f600060105481526020019081526020016000206000808201600090555050601260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190806001815401808255809150506001900390600052602060002001600090919091909150600082015181600001555050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc349081150290604051600060405180830381858888f19350505050158015610cae573d6000803e3d6000fd5b5050565b6000600a5411610cf7576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cee90611db2565b60405180910390fd5b600b54341015610d3c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d3390611d1d565b60405180910390fd5b600a6000815480929190610d4f90611d3d565b9190505550600060096000600a548152602001908152602001600020604051806020016040529081600082015481525050905060096000600a5481526020019081526020016000206000808201600090555050601260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190806001815401808255809150506001900390600052602060002001600090919091909150600082015181600001555050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc349081150290604051600060405180830381858888f19350505050158015610e7b573d6000803e3d6000fd5b5050565b6000600d5411610ec4576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ebb90611e1e565b60405180910390fd5b600e54341015610f09576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f0090611d1d565b60405180910390fd5b600d6000815480929190610f1c90611d3d565b91905055506000600c6000600d5481526020019081526020016000206040518060200160405290816000820154815250509050600c6000600d5481526020019081526020016000206000808201600090555050601260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190806001815401808255809150506001900390600052602060002001600090919091909150600082015181600001555050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc349081150290604051600060405180830381858888f19350505050158015611048573d6000803e3d6000fd5b5050565b600060075411611091576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161108890611e8a565b60405180910390fd5b6008543410156110d6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110cd90611d1d565b60405180910390fd5b600760008154809291906110e990611d3d565b9190505550600060066000600754815260200190815260200160002060405180602001604052908160008201548152505090506006600060075481526020019081526020016000206000808201600090555050601260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190806001815401808255809150506001900390600052602060002001600090919091909150600082015181600001555050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc349081150290604051600060405180830381858888f19350505050158015611215573d6000803e3d6000fd5b5050565b3373ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146112a9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016112a090611c45565b60405180910390fd5b600060105490505b60025481101561132a5760006112c56118c6565b90506000604051806020016040528083815250905080600f60006010548152602001908152602001600020600082015181600001559050506010600081548092919061131090611ba0565b91905055505050808061132290611ba0565b9150506112b1565b50565b3373ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146113bd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016113b490611c45565b60405180910390fd5b600060045490505b60025481101561143e5760006113d96118c6565b90506000604051806020016040528083815250905080600360006004548152602001908152602001600020600082015181600001559050506004600081548092919061142490611ba0565b91905055505050808061143690611ba0565b9150506113c5565b50565b600c6020528060005260406000206000915090508060000154905081565b6000600254905090565b6060601260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b8282101561150257838290600052602060002001604051806020016040529081600082015481525050815260200190600101906114ca565b505050509050919050565b3373ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161461159d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161159490611c45565b60405180910390fd5b6000600a5490505b60025481101561161e5760006115b96118c6565b9050600060405180602001604052808381525090508060096000600a54815260200190815260200160002060008201518160000155905050600a600081548092919061160490611ba0565b91905055505050808061161690611ba0565b9150506115a5565b50565b600060045411611666576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161165d90611ef6565b60405180910390fd5b6005543410156116ab576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016116a290611f62565b60405180910390fd5b600460008154809291906116be90611d3d565b9190505550600060036000600454815260200190815260200160002060405180602001604052908160008201548152505090506003600060045481526020019081526020016000206000808201600090555050601260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190806001815401808255809150506001900390600052602060002001600090919091909150600082015181600001555050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc349081150290604051600060405180830381858888f193505050501580156117ea573d6000803e3d6000fd5b5050565b600f6020528060005260406000206000915090508060000154905081565b3373ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161461189c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161189390611c45565b60405180910390fd5b6118a461132d565b6118ac610755565b6118b461150d565b6118bc610559565b6118c4611219565b565b60008060008154809291906118da90611ba0565b9190505550600054905090565b6040518060200160405280600081525090565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000819050919050565b61193981611926565b82525050565b6020820160008201516119556000850182611930565b50505050565b6000611967838361193f565b60208301905092915050565b6000602082019050919050565b600061198b826118fa565b6119958185611905565b93506119a083611916565b8060005b838110156119d15781516119b8888261195b565b97506119c383611973565b9250506001810190506119a4565b5085935050505092915050565b600060208201905081810360008301526119f88184611980565b905092915050565b600080fd5b611a0e81611926565b8114611a1957600080fd5b50565b600081359050611a2b81611a05565b92915050565b600060208284031215611a4757611a46611a00565b5b6000611a5584828501611a1c565b91505092915050565b611a6781611926565b82525050565b6000602082019050611a826000830184611a5e565b92915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611ab382611a88565b9050919050565b611ac381611aa8565b8114611ace57600080fd5b50565b600081359050611ae081611aba565b92915050565b600060208284031215611afc57611afb611a00565b5b6000611b0a84828501611ad1565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000611bab82611926565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203611bdd57611bdc611b71565b5b600182019050919050565b600082825260208201905092915050565b7f566f7573206e276574657320706173206c652070726f7072696f000000000000600082015250565b6000611c2f601a83611be8565b9150611c3a82611bf9565b602082019050919050565b60006020820190508181036000830152611c5e81611c22565b9050919050565b7f50726f6475697420626c65752065737420766964650000000000000000000000600082015250565b6000611c9b601583611be8565b9150611ca682611c65565b602082019050919050565b60006020820190508181036000830152611cca81611c8e565b9050919050565b7f657870656e736976652021000000000000000000000000000000000000000000600082015250565b6000611d07600b83611be8565b9150611d1282611cd1565b602082019050919050565b60006020820190508181036000830152611d3681611cfa565b9050919050565b6000611d4882611926565b915060008203611d5b57611d5a611b71565b5b600182039050919050565b7f50726f6475697420726f75676520657374207669646500000000000000000000600082015250565b6000611d9c601683611be8565b9150611da782611d66565b602082019050919050565b60006020820190508181036000830152611dcb81611d8f565b9050919050565b7f50726f64756974206f72616e6765206573742076696465000000000000000000600082015250565b6000611e08601783611be8565b9150611e1382611dd2565b602082019050919050565b60006020820190508181036000830152611e3781611dfb565b9050919050565b7f50726f6475697420766572742065737420766964650000000000000000000000600082015250565b6000611e74601583611be8565b9150611e7f82611e3e565b602082019050919050565b60006020820190508181036000830152611ea381611e67565b9050919050565b7f50726f64756974206a61756e6520657374207669646500000000000000000000600082015250565b6000611ee0601683611be8565b9150611eeb82611eaa565b602082019050919050565b60006020820190508181036000830152611f0f81611ed3565b9050919050565b7f496c206d616e717565206465206c27617267656e740000000000000000000000600082015250565b6000611f4c601583611be8565b9150611f5782611f16565b602082019050919050565b60006020820190508181036000830152611f7b81611f3f565b905091905056fea2646970667358221220526b7864c3d381690448e355d4d4262ce81591540b53506781da8598603a574d64736f6c63430008120033''
let abi = '[{"inputs": [{"internalType": "uint256","name": "_max_item","type": "uint256"},{"internalType": "uint256","name": "_priceJ","type": "uint256"},{"internalType": "uint256","name": "_priceV","type": "uint256"},{"internalType": "uint256","name": "_priceR","type": "uint256"},{"internalType": "uint256","name": "_priceO","type": "uint256"},{"internalType": "uint256","name": "_priceB","type": "uint256"}],"stateMutability": "nonpayable","type": "constructor"},{"inputs": [],"name": "buyBleu","outputs": [],"stateMutability": "payable","type": "function"},{"inputs": [],"name": "buyJaune","outputs": [],"stateMutability": "payable","type": "function"},{"inputs": [],"name": "buyOrange","outputs": [],"stateMutability": "payable","type": "function"},{"inputs": [],"name": "buyRouge","outputs": [],"stateMutability": "payable","type": "function"},{"inputs": [],"name": "buyVert","outputs": [],"stateMutability": "payable","type": "function"},{"inputs": [],"name": "getAllpBleu","outputs": [{"components": [ {   "internalType": "uint256",    "name": "productToken",   "type": "uint256" }],"internalType": "struct friandise.Product[]","name": "","type": "tuple[]"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getAllpJaune","outputs": [{"components": [  {   "internalType": "uint256",    "name": "productToken",   "type": "uint256" }],"internalType": "struct friandise.Product[]","name": "","type": "tuple[]"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getAllpOrange","outputs": [{"components": [ {   "internalType": "uint256",    "name": "productToken",   "type": "uint256" }],"internalType": "struct friandise.Product[]","name": "","type": "tuple[]"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getAllpRouge","outputs": [{"components": [  {   "internalType": "uint256",    "name": "productToken",   "type": "uint256" }],"internalType": "struct friandise.Product[]","name": "","type": "tuple[]"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getAllpVert","outputs": [{"components": [ {   "internalType": "uint256",    "name": "productToken",   "type": "uint256" }],"internalType": "struct friandise.Product[]","name": "","type": "tuple[]"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getMaxItems","outputs": [{"internalType": "uint256","name": "","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [{"internalType": "address","name": "user","type": "address"}],"name": "getProductByUser","outputs": [{"components": [  {   "internalType": "uint256",    "name": "productToken",   "type": "uint256" }],"internalType": "struct friandise.Product[]","name": "","type": "tuple[]"}],"stateMutability": "view","type": "function"},{"inputs": [{"internalType": "uint256","name": "","type": "uint256"}],"name": "pBleu","outputs": [{"internalType": "uint256","name": "productToken","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [{"internalType": "uint256","name": "","type": "uint256"}],"name": "pJaune","outputs": [{"internalType": "uint256","name": "productToken","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [{"internalType": "uint256","name": "","type": "uint256"}],"name": "pOrange","outputs": [{"internalType": "uint256","name": "productToken","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [{"internalType": "uint256","name": "","type": "uint256"}],"name": "pRouge","outputs": [{"internalType": "uint256","name": "productToken","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [{"internalType": "uint256","name": "","type": "uint256"}],"name": "pVert","outputs": [{"internalType": "uint256","name": "productToken","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "refillAll","outputs": [],"stateMutability": "nonpayable","type": "function"},{"inputs": [],"name": "refullProduitBleu","outputs": [],"stateMutability": "nonpayable","type": "function"},{"inputs": [],"name": "refullProduitJaune","outputs": [],"stateMutability": "nonpayable","type": "function"},{"inputs": [],"name": "refullProduitOrange","outputs": [],"stateMutability": "nonpayable","type": "function"},{"inputs": [],"name": "refullProduitRouge","outputs": [],"stateMutability": "nonpayable","type": "function"},{"inputs": [],"name": "refullProduitVert","outputs": [],"stateMutability": "nonpayable","type": "function"}]'
*/
/*Param simple: 
let bytecode = '608060405234801561001057600080fd5b50336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060005b6005811015610087576000600160008381526020019081526020016000208190555080610080906100c6565b9050610054565b5061010e565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000819050919050565b60006100d1826100bc565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036101035761010261008d565b5b600182019050919050565b6104228061011d6000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c8063ce01c9fc1161005b578063ce01c9fc146100f1578063d016fc221461010f578063dbf184511461012b578063f797a8191461014957610088565b80636738c97a1461008d5780636985cf86146100ab5780638d8a71d2146100b5578063a9a1fdae146100d3575b600080fd5b610095610179565b6040516100a291906102c8565b60405180910390f35b6100b3610194565b005b6100bd6101cd565b6040516100ca91906102c8565b60405180910390f35b6100db6101e9565b6040516100e891906102c8565b60405180910390f35b6100f9610205565b60405161010691906102c8565b60405180910390f35b61012960048036038101906101249190610314565b610221565b005b61013361027b565b60405161014091906102c8565b60405180910390f35b610163600480360381019061015e9190610314565b610297565b60405161017091906102c8565b60405180910390f35b60006001600080815260200190815260200160002054905090565b60005b60058110156101ca5760066001600083815260200190815260200160002081905550806101c390610370565b9050610197565b50565b6000600160006003815260200190815260200160002054905090565b6000600160006001815260200190815260200160002054905090565b6000600160006002815260200190815260200160002054905090565b6005811061022e57600080fd5b600060016000838152602001908152602001600020541161024e57600080fd5b6001806000838152602001908152602001600020600082825461027191906103b8565b9250508190555050565b6000600160006004815260200190815260200160002054905090565b60016020528060005260406000206000915090505481565b6000819050919050565b6102c2816102af565b82525050565b60006020820190506102dd60008301846102b9565b92915050565b600080fd5b6102f1816102af565b81146102fc57600080fd5b50565b60008135905061030e816102e8565b92915050565b60006020828403121561032a576103296102e3565b5b6000610338848285016102ff565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061037b826102af565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036103ad576103ac610341565b5b600182019050919050565b60006103c3826102af565b91506103ce836102af565b92508282039050818111156103e6576103e5610341565b5b9291505056fea264697066735822122071372ff03421fb69abf77e6f0ac404e67496d68f2b47130e5d587dd9de97fd1b64736f6c63430008120033'
let abi = '[{"inputs": [],"stateMutability": "nonpayable","type": "constructor"},{"inputs": [],"name": "getBleu","outputs": [{"internalType": "uint256","name": "","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getJaune","outputs": [{"internalType": "uint256","name": "","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getOrange","outputs": [{"internalType": "uint256","name": "","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getRouge","outputs": [{"internalType": "uint256","name": "","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getVert","outputs": [{"internalType": "uint256","name": "","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [{"internalType": "uint256","name": "","type": "uint256"}],"name": "machine","outputs": [{"internalType": "uint256","name": "","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "rechargeFull","outputs": [],"stateMutability": "nonpayable","type": "function"},{"inputs": [{"internalType": "uint256","name": "id","type": "uint256"}],"name": "selection","outputs": [],"stateMutability": "nonpayable","type": "function"}]'
*/

/*Param test :
let bytecode = '0x608060405234801561001057600080fd5b50336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060005b6005811015610087576000600160008381526020019081526020016000208190555080610080906100c6565b9050610054565b5061010e565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000819050919050565b60006100d1826100bc565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036101035761010261008d565b5b600182019050919050565b61052d8061011d6000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c8063ce01c9fc1161005b578063ce01c9fc146100f1578063d016fc221461010f578063dbf184511461012b578063f797a8191461014957610088565b80636738c97a1461008d5780636985cf86146100ab5780638d8a71d2146100b5578063a9a1fdae146100d3575b600080fd5b610095610179565b6040516100a29190610356565b60405180910390f35b6100b3610194565b005b6100bd61025b565b6040516100ca9190610356565b60405180910390f35b6100db610277565b6040516100e89190610356565b60405180910390f35b6100f9610293565b6040516101069190610356565b60405180910390f35b610129600480360381019061012491906103a2565b6102af565b005b610133610309565b6040516101409190610356565b60405180910390f35b610163600480360381019061015e91906103a2565b610325565b6040516101709190610356565b60405180910390f35b60006001600080815260200190815260200160002054905090565b3373ffffffffffffffffffffffffffffffffffffffff1660008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610222576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102199061042c565b60405180910390fd5b60005b60058110156102585760066001600083815260200190815260200160002081905550806102519061047b565b9050610225565b50565b6000600160006003815260200190815260200160002054905090565b6000600160006001815260200190815260200160002054905090565b6000600160006002815260200190815260200160002054905090565b600581106102bc57600080fd5b60006001600083815260200190815260200160002054116102dc57600080fd5b600180600083815260200190815260200160002060008282546102ff91906104c3565b9250508190555050565b6000600160006004815260200190815260200160002054905090565b60016020528060005260406000206000915090505481565b6000819050919050565b6103508161033d565b82525050565b600060208201905061036b6000830184610347565b92915050565b600080fd5b61037f8161033d565b811461038a57600080fd5b50565b60008135905061039c81610376565b92915050565b6000602082840312156103b8576103b7610371565b5b60006103c68482850161038d565b91505092915050565b600082825260208201905092915050565b7f4e6f74206f776e65720000000000000000000000000000000000000000000000600082015250565b60006104166009836103cf565b9150610421826103e0565b602082019050919050565b6000602082019050818103600083015261044581610409565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006104868261033d565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036104b8576104b761044c565b5b600182019050919050565b60006104ce8261033d565b91506104d98361033d565b92508282039050818111156104f1576104f061044c565b5b9291505056fea2646970667358221220085c3c9d663e85fdf9e60df2aa888b2dce3e2a027c82670e9289598b4fd1553d64736f6c63430008120033'
let abi = '[{"inputs": [],"stateMutability": "nonpayable","type": "constructor"},{"inputs": [],"name": "getBleu","outputs": [{"internalType": "uint256","name": "","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getJaune","outputs": [{"internalType": "uint256","name": "","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getOrange","outputs": [{"internalType": "uint256","name": "","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getRouge","outputs": [{"internalType": "uint256","name": "","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "getVert","outputs": [{"internalType": "uint256","name": "","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [{"internalType": "uint256","name": "","type": "uint256"}],"name": "machine","outputs": [{"internalType": "uint256","name": "","type": "uint256"}],"stateMutability": "view","type": "function"},{"inputs": [],"name": "rechargeFull","outputs": [],"stateMutability": "nonpayable","type": "function"},{"inputs": [{"internalType": "uint256","name": "id","type": "uint256"}],"name": "selection","outputs": [],"stateMutability": "nonpayable","type": "function"}]';
*/
